#!/bin/bash

DBFILE="sjsmusic.db"

WHERE=""

case "$1" in
    '-n') WHERE='where balance < 0';;
    '-p') WHERE='where balance > 0';;
    '-z') WHERE='where balance = 0';;
esac

sqlite3 $DBFILE << EOS
.mode column
.headers on
select momefid, name, printf("%.2f", balance) as balance from balance $WHERE order by name;
.print
select count(*) as families, sum(balance) as total from balance $WHERE;
EOS
